@import "../../_pixel-theme.scss";

.profile-page {
  min-height: 100vh;
  padding: 40px 20px;
  background-color: #87ceeb; // Sky blue as seen in image
  font-family: var(--pixel-font-main);
}

.dashboard-container {
  max-width: 1100px;
  margin: 0 auto;

  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 40px;
    padding-bottom: 16px;
    border-bottom: 6px solid var(--pixel-black);

    .pixel-title {
      font-family: var(--pixel-font-title);
      font-size: 2.8rem;
      margin: 0;
      color: var(--pixel-primary);
      text-shadow: 4px 4px 0 var(--pixel-black);
      @include pixel-text-shine(var(--pixel-primary));
    }

    .system-status {
      font-family: var(--pixel-font-title);
      font-size: 0.7rem;
      color: var(--pixel-secondary);
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      letter-spacing: 2px;

      .status-dot {
        width: 10px;
        height: 10px;
        background: var(--pixel-secondary);
        animation: blink 1s infinite steps(2);
      }
    }

    .mini-profile {
      display: flex;
      align-items: center;
      gap: 15px;
      background: var(--pixel-secondary);
      padding: 8px 16px;
      border: 4px solid var(--pixel-black);
      box-shadow: 6px 6px 0 var(--pixel-black);

      .mini-name { 
        font-family: var(--pixel-font-title); 
        font-size: 0.7rem; 
        color: var(--pixel-black);
      }
      .mini-avatar { 
        width: 45px; 
        height: 45px; 
        border: 3px solid var(--pixel-black); 
        background: white; 
        image-rendering: pixelated; 
        object-fit: cover;
      }
    }
  }

  .dashboard-grid {
    display: grid;
    grid-template-columns: 350px 1fr;
    gap: 32px;

    @media (max-width: 900px) { grid-template-columns: 1fr; }
  }
}

// Global Box Style
.pixel-box {
  background: white;
  border: 5px solid var(--pixel-black);
  box-shadow: 12px 12px 0 var(--pixel-black);
  margin-bottom: 24px;
}

// Sidebar
.dashboard-sidebar {
  .character-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 24px;

    .avatar-wrapper {
      position: relative;
      margin-bottom: 30px;
      .main-avatar {
        width: 200px;
        height: 200px;
        border: 6px solid var(--pixel-black);
        background: #f0f0f0;
        image-rendering: pixelated;
        object-fit: cover;
      }
      .edit-avatar-float { 
        position: absolute; 
        bottom: 0; 
        right: 0; 
        padding: 8px;
        background: var(--pixel-primary);
        color: white;
        border: 4px solid var(--pixel-black);
        box-shadow: 4px 4px 0 var(--pixel-black);
        &:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0 var(--pixel-black); }
      }
    }

    .character-identity {
      text-align: center;
      margin-bottom: 30px;
      .display-name { 
        font-family: var(--pixel-font-title); 
        font-size: 2rem; 
        margin-bottom: 12px; 
        color: var(--pixel-primary);
        text-shadow: 3px 3px 0 var(--pixel-black);
      }
      .level-badge {
        display: inline-block;
        padding: 6px 16px;
        background: var(--pixel-black);
        color: var(--pixel-white);
        font-family: var(--pixel-font-title);
        font-size: 0.8rem;
        letter-spacing: 1px;
      }
    }

    .quick-edit {
      display: flex;
      gap: 10px;
      width: 100%;
      
      .pixel-input {
        flex: 1;
        padding: 10px;
        font-family: var(--pixel-font-main);
        font-size: 1rem;
        border: 4px solid var(--pixel-black);
        background: #f8f9fa;
        &:focus { background: white; border-color: var(--pixel-primary); }
      }

      .btn-save {
        padding: 8px 12px;
        background: var(--pixel-secondary);
        color: var(--pixel-black);
        border: 4px solid var(--pixel-black);
        box-shadow: 4px 4px 0 var(--pixel-black);
        mat-icon { font-size: 20px; width: 20px; height: 20px; }
      }
    }
  }

  .session-card {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    
    .pixel-btn {
      width: 100%;
      justify-content: flex-start;
      margin: 0;
      &.btn-danger { background-color: #ff4757; }
      &.btn-secondary { background-color: #747d8c; }
    }
  }
}

// Main Content
.dashboard-main {
  .section-card {
    padding: 30px;
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
    border-bottom: 4px solid #f0f0f0;
    padding-bottom: 12px;

    mat-icon { color: var(--pixel-secondary); font-size: 28px; width: 28px; height: 28px; }
    h3 { 
      font-family: var(--pixel-font-title); 
      font-size: 1.1rem; 
      margin: 0; 
      color: var(--pixel-black);
      letter-spacing: 1px;
    }
  }

  .credentials-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;

    @media (max-width: 600px) { grid-template-columns: 1fr; }

    .credential-item {
      .label { 
        display: block; 
        font-family: var(--pixel-font-title); 
        font-size: 0.6rem; 
        color: #888; 
        margin-bottom: 8px;
        letter-spacing: 1px;
      }
      .value { 
        font-weight: bold; 
        font-size: 1.1rem; 
        color: var(--pixel-black); 
      }
      .code { 
        font-family: 'Courier New', Courier, monospace; 
        font-size: 0.9rem; 
        background: #f1f2f6; 
        padding: 4px 10px; 
        border: 2px solid #dfe4ea;
        display: inline-block;
      }
    }
  }

  .stats-container {
    .xp-bar-wrapper {
      margin-bottom: 40px;
      .xp-header {
        display: flex;
        justify-content: space-between;
        font-family: var(--pixel-font-title);
        font-size: 0.75rem;
        margin-bottom: 12px;
        color: var(--pixel-black);
      }
      .pixel-progress-bg {
        height: 32px;
        background: #f1f2f6;
        border: 5px solid var(--pixel-black);
        position: relative;
        overflow: hidden;

        .pixel-progress-fill {
          height: 100%;
          background: var(--pixel-secondary);
          box-shadow: inset -6px 0 0 rgba(0,0,0,0.15);
          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
      }
    }

    .activity-log {
      h4 { 
        font-family: var(--pixel-font-title); 
        font-size: 0.8rem; 
        margin-bottom: 20px; 
        color: #57606f; 
        border-left: 6px solid var(--pixel-primary);
        padding-left: 12px;
      }
      .log-item {
        display: flex;
        gap: 20px;
        padding: 16px 0;
        border-bottom: 3px solid #f1f2f6;
        align-items: center;

        .log-time { 
          font-family: var(--pixel-font-title); 
          font-size: 0.6rem; 
          color: var(--pixel-primary); 
          min-width: 80px; 
        }
        .log-event { 
          color: var(--pixel-black); 
          font-size: 1rem;
          font-weight: 500;
        }
      }
    }
  }
}

@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

.message {
  margin-top: 20px;
  padding: 12px 16px;
  border: 4px solid var(--pixel-black);
  font-family: var(--pixel-font-main);
  font-weight: bold;
  font-size: 0.9rem;
  text-align: center;
  
  &.error { background: #ff4757; color: white; }
  &:not(.error) { background: #2ed573; color: white; }
}

.pixel-input {
  outline: none;
  image-rendering: pixelated;
}

mat-icon {
  vertical-align: middle;
}
